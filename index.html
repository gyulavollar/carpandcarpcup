<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Carp and Carp Cup 2025</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
</head>
<body>
  <header>
    <h1>üé£ Carp and Carp Cup 2025</h1>
  </header>

  <main>
  <div id="resultsWrapper">
    <table id="resultsTable">
      <thead>
        <tr>
          <th>Helyez√©s</th>
          <th>Csapatn√©v</th>
          <th><i class="fas fa-fish"></i> 1. Hal</th>
          <th><i class="fas fa-fish"></i> 2. Hal</th>
          <th><i class="fas fa-fish"></i> 3. Hal</th>
          <th><i class="fas fa-fish"></i> 4. Hal</th>
          <th><i class="fas fa-fish"></i> 5. Hal</th>
          <th>√ñsszesen (kg)</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="rank">-</td>
          <td>9. H√°z F√ºl√∂p Carp Team</td>
          <td>16.31 T≈ëponty</td>
          <td>13.58 T≈ëponty</td>
          <td>13.58 T≈ëponty</td>
          <td>0</td>
          <td>0</td>
          <td class="total-weight">0</td>
        </tr>
        <tr>
          <td class="rank">-</td>
          <td>1. H√°z Carp Hunter Team</td>
          <td>0</td>
          <td>0</td>
          <td>0</td>
          <td>0</td>
          <td>0</td>
          <td class="total-weight">0</td>
        </tr>
        <tr>
          <td class="rank">-</td>
          <td>8. H√°z ViNo Carp Team</td>
          <td>0</td>
          <td>0</td>
          <td>0</td>
          <td>0</td>
          <td>0</td>
          <td class="total-weight">0</td>
        </tr>
        <tr>
          <td class="rank">-</td>
          <td> 4. H√°z PaSa Team</td>
          <td>14.85 Amur</td>
          <td>13.92 T≈ëponty</td>
          <td>13.47 Amur</td>
          <td>0</td>
          <td>0</td>
          <td class="total-weight">0</td>
        </tr>
        <tr>
          <td class="rank">-</td>
          <td>5. H√°z T&T Carp Team</td>
          <td>13.25 T≈ëponty</td>
          <td>0</td>
          <td>0</td>
          <td>0</td>
          <td>0</td>
          <td class="total-weight">0</td>
        </tr>
        <tr>
          <td class="rank">-</td>
          <td>2. H√°z KutyaPonty Team</td>
          <td>13.15 Amur</td>
          <td>0</td>
          <td>0</td>
          <td>0</td>
          <td>0</td>
          <td class="total-weight">0</td>
        </tr>
        <tr>
          <td class="rank">-</td>
          <td>3. H√°z Carp&Carp G√©za</td>
          <td>13.99 T≈ëponty</td>
          <td>17.11 T≈ëponty</td>
          <td>0</td>
          <td>0</td>
          <td>0</td>
          <td class="total-weight">0</td>
        </tr>
      </tbody>
    </table>
    </div>

    <div id="biggestFish">
      <h2>üèÜ Legnagyobb hal:</h2>
      <p><i class="fas fa-fish"></i> <span id="biggestFishWeight">-</span> kg - <strong id="biggestFishTeam">-</strong></p>
    </div>

    <div id="leaderTeam">
      <h2>ü•á Vezet≈ë csapat √∂sszt√∂meg alapj√°n:</h2>
      <p><i class="fas fa-trophy"></i> <strong id="leaderTeamName">-</strong> - <span id="leaderTeamWeight">-</span> kg</p>
    </div>
  </main>

<script>
  const table = document.getElementById('resultsTable');
  const tbody = table.querySelector('tbody');
  const biggestFishWeightEl = document.getElementById('biggestFishWeight');
  const biggestFishTeamEl = document.getElementById('biggestFishTeam');
  const leaderTeamNameEl = document.getElementById('leaderTeamName');
  const leaderTeamWeightEl = document.getElementById('leaderTeamWeight');
  const adminPassword = "ponty2025";

  function updateResults() {
    let biggest = 0;
    let teamName = '-';
    const rows = Array.from(tbody.querySelectorAll('tr')).filter(row => row.querySelectorAll('td').length === 8);

    rows.forEach(row => {
      let sum = 0;
      let tds = row.querySelectorAll('td');
      let team = tds[1].innerText;

      for (let i = 2; i <= 6; i++) {
        let val = parseFloat(tds[i].innerText.replace(",", "."));
        if (!isNaN(val)) {
          sum += val;
          if (val > biggest) {
            biggest = val;
            teamName = team;
          }
        }
      }

      tds[7].innerText = sum.toFixed(2);
    });

    rows.sort((a, b) => {
      const weightA = parseFloat(a.cells[7].innerText) || 0;
      const weightB = parseFloat(b.cells[7].innerText) || 0;
      return weightB - weightA;
    });

    rows.forEach((row, index) => {
      row.cells[0].innerText = index + 1;
      tbody.appendChild(row);
    });

    biggestFishWeightEl.innerText = biggest > 0 ? biggest.toFixed(2) : '-';
    biggestFishTeamEl.innerText = teamName;
    leaderTeamNameEl.innerText = rows[0].cells[1].innerText;
    leaderTeamWeightEl.innerText = rows[0].cells[7].innerText;
  }

  function enableEdit() {
    const input = document.getElementById('adminPass').value;
    if (input === adminPassword) {
      const rows = Array.from(tbody.querySelectorAll('tr')).filter(row => row.querySelectorAll('td').length === 8);
      rows.forEach(row => {
        for (let i = 2; i <= 6; i++) {
          row.cells[i].setAttribute("contenteditable", "true");
          row.cells[i].style.backgroundColor = "#2e572e";
        }
      });
      alert("Admin m√≥d enged√©lyezve!");
    } else {
      alert("Hib√°s jelsz√≥!");
    }
  }

  updateResults();
</script>

</body>
</html>
